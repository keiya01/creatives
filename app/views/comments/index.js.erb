$(function(){
$("#comments").html("<%= j(render 'comments/index') %>");
$("#comments").show();
var current_scrollY = $( window ).scrollTop();
$('.show-page').css({
    position: 'fixed',
    width: '100%',
    top: -1 * current_scrollY
  });
$('.back-btn').on('click', function(e){
    $('.show-page').attr( {style: ''} );
    $('html,body').prop({scrollTop: current_scrollY});
    $( '#comments').hide();
});

function TextAreaHeight(TextArea){
		$(TextArea).height(15);//init
		$(TextArea).css("lineHeight","15px");//init

		$(TextArea).on("input",function(evt){
    		if(evt.target.scrollHeight > evt.target.offsetHeight){
        		$(evt.target).height(evt.target.scrollHeight);
    		}else{
        	var lineHeight = Number($(evt.target).css("lineHeight").split("px")[0]);
        	while (true){
            	$(evt.target).height($(evt.target).height() - lineHeight);
            	if(evt.target.scrollHeight > evt.target.offsetHeight){
                	$(evt.target).height(evt.target.scrollHeight);
            		break;
            		}
        		}
    		};
    	});
	};
	TextAreaHeight(".comment-text");
});